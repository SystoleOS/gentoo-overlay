From 901a9f140261827f975b996d30ae50de74756c93 Mon Sep 17 00:00:00 2001
From: Rafael Palomar <rafael.palomar@rr-research.no>
Date: Fri, 6 Mar 2020 20:43:28 +0100
Subject: [PATCH 27/30] ENH: Enable search of settings in /etc/Slicer/ for
 intstall tree

---
 Base/QTCore/qSlicerCoreApplication.cxx | 2 +-
 CMake/SlicerDirectories.cmake          | 1 +
 CMake/vtkSlicerConfigure.h.in          | 1 +
 3 files changed, 3 insertions(+), 1 deletion(-)

diff --git a/Base/QTCore/qSlicerCoreApplication.cxx b/Base/QTCore/qSlicerCoreApplication.cxx
index 69914a88fd..27e1c84e32 100644
--- a/Base/QTCore/qSlicerCoreApplication.cxx
+++ b/Base/QTCore/qSlicerCoreApplication.cxx
@@ -1190,7 +1190,7 @@ QString qSlicerCoreApplication::launcherSettingsFilePath()const
   QString appName = this->applicationName().replace("-tmp", "");
   if (this->isInstalled())
     {
-    return this->slicerHome() + "/" Slicer_BIN_DIR "/" + appName + "LauncherSettings.ini";
+      return QString("/") + Slicer_ETC_DIR "/" +  + "SlicerLauncherSettings.ini";
     }
   else
     {
diff --git a/CMake/SlicerDirectories.cmake b/CMake/SlicerDirectories.cmake
index 20e42d0fe6..335b76bd91 100644
--- a/CMake/SlicerDirectories.cmake
+++ b/CMake/SlicerDirectories.cmake
@@ -56,6 +56,7 @@ endif()
 #-----------------------------------------------------------------------------
 # for build tree
 set(Slicer_BIN_DIR "bin")
+set(Slicer_ETC_DIR "etc/Slicer")
 set(Slicer_LIB_DIR "lib/${Slicer_MAIN_PROJECT_APPLICATION_NAME}-${Slicer_VERSION_MAJOR}.${Slicer_VERSION_MINOR}")
 set(Slicer_INCLUDE_DIR "include/${Slicer_MAIN_PROJECT_APPLICATION_NAME}-${Slicer_VERSION_MAJOR}.${Slicer_VERSION_MINOR}")
 set(Slicer_SHARE_DIR "share/${Slicer_MAIN_PROJECT_APPLICATION_NAME}-${Slicer_VERSION_MAJOR}.${Slicer_VERSION_MINOR}")
diff --git a/CMake/vtkSlicerConfigure.h.in b/CMake/vtkSlicerConfigure.h.in
index c1ed2f5f3e..11b5b5657f 100644
--- a/CMake/vtkSlicerConfigure.h.in
+++ b/CMake/vtkSlicerConfigure.h.in
@@ -48,6 +48,7 @@
 
 #define Slicer_MAIN_PROJECT_APPLICATION_NAME "@Slicer_MAIN_PROJECT_APPLICATION_NAME@"
 #define Slicer_BIN_DIR "@Slicer_BIN_DIR@"
+#define Slicer_ETC_DIR "@Slicer_ETC_DIR@"
 #define Slicer_LIB_DIR "@Slicer_LIB_DIR@"
 #define Slicer_INCLUDE_DIR "@Slicer_INCLUDE_DIR@"
 #define Slicer_SHARE_DIR "@Slicer_SHARE_DIR@"
-- 
2.26.2

