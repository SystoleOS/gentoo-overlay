From 6548965cc610d7bbd15815884b8abfc858279666 Mon Sep 17 00:00:00 2001
From: Rafael Palomar <rafael.palomar@rr-research.no>
Date: Thu, 3 Oct 2019 12:05:50 +0200
Subject: [PATCH 05/29] COMP: Add installation of missing files

---
 CMake/SlicerInstallConfig.cmake.in | 14 +++++++++++---
 CMakeLists.txt                     | 14 ++++++++++++++
 Resources/CMakeLists.txt           | 21 +++++++++++++--------
 3 files changed, 38 insertions(+), 11 deletions(-)

diff --git a/CMake/SlicerInstallConfig.cmake.in b/CMake/SlicerInstallConfig.cmake.in
index 0e9b1a4bd7..5cad3bc60b 100644
--- a/CMake/SlicerInstallConfig.cmake.in
+++ b/CMake/SlicerInstallConfig.cmake.in
@@ -70,7 +70,9 @@ set(Slicer_Libs_INCLUDE_DIRS
   "${Slicer_HOME}/include/ITKCommandIO"
   "${Slicer_HOME}/include/LoadableModule"
   "${Slicer_HOME}/include/MGHImageIO"
-  "${Slicer_HOME}/include/MRML"
+  "${Slicer_HOME}/include/MRMLCore"
+  "${Slicer_HOME}/include/MRMLDisplayableManager"
+  "${Slicer_HOME}/include/MRMLLogic"
   "${Slicer_HOME}/include/MRMLIDImageIO"
   "${Slicer_HOME}/include/ModuleDescriptionParser"
   "${Slicer_HOME}/include/Qdec"
@@ -79,6 +81,8 @@ set(Slicer_Libs_INCLUDE_DIRS
   "${Slicer_HOME}/include/vtkITK"
   "${Slicer_HOME}/include/vtkSegmentationCore"
   "${Slicer_HOME}/include/vtkTeem"
+  "${Slicer_HOME}/include/SlicerBaseLogic"
+  "${Slicer_HOME}/include/qMRMLWidgets"
   )
 
 # Slicer Base library directories.
@@ -90,8 +94,9 @@ set(Slicer_Base_LIBRARY_DIRS
 set(Slicer_Base_INCLUDE_DIRS
   "${Slicer_HOME}/@Slicer_INSTALL_INCLUDE_DIR@"
   "${Slicer_HOME}/@Slicer_INSTALL_INCLUDE_DIR@/SlicerBaseCLI"
-  "${Slicer_HOME}/@Slicer_INSTALL_INCLUDE_DIR@/SlicerBaseGUI"
-  "${Slicer_HOME}/@Slicer_INSTALL_INCLUDE_DIR@/SlicerBaseLogic"
+  "${Slicer_HOME}/@Slicer_INSTALL_INCLUDE_DIR@/qSlicerBaseQTApp"
+  "${Slicer_HOME}/@Slicer_INSTALL_INCLUDE_DIR@/qSlicerBaseQTGUI"
+  "${Slicer_HOME}/@Slicer_INSTALL_INCLUDE_DIR@/qSlicerBaseQTCore"
   )
 
 # The location of the UseSlicer.cmake file.
@@ -135,3 +140,6 @@ set(PYTHON_LIBRARIES "${Slicer_HOME}/lib/Python/lib/${PYTHON_LIB_FILE}")
 get_filename_component(PYTHON_INCLUDE_DIR "${PYTHON_INCLUDE_PATH}" NAME)
 set(PYTHON_INCLUDE_PATH "${Slicer_HOME}/lib/Python/include/${PYTHON_INCLUDE_DIR}")
 set(CTK_CMAKE_DIR "@CTK_CMAKE_DIR@")
+
+set(Slicer_EXPORT_HEADER_TEMPLATE "${Slicer_CMAKE_DIR}/qSlicerExport.h.in")
+set(Slicer_LOGOS_RESOURCE "${Slicer_HOME}/${Slicer_INSTALL_SHARE_DIR}/Resources/qSlicer.qrc")
diff --git a/CMakeLists.txt b/CMakeLists.txt
index ea83168caf..afaedac8ff 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -1161,6 +1161,20 @@ if(NOT Slicer_INSTALL_NO_DEVELOPMENT)
     DESTINATION ${Slicer_INSTALL_LIB_DIR}
     COMPONENT Development
     )
+
+  file(GLOB cmake_files "${CMAKE_CURRENT_SOURCE_DIR}/Extensions/CMake/*.cmake")
+  install(
+    FILES
+    ${cmake_files}
+    DESTINATION ${Slicer_INSTALL_LIB_DIR}/CMake COMPONENT Development
+    )
+
+  file(GLOB cmake_files "${Slicer_SOURCE_DIR}/CMake/*.in")
+  install(
+    FILES
+    ${cmake_files}
+    DESTINATION ${Slicer_INSTALL_LIB_DIR}/CMake COMPONENT Development
+    )  
 endif()
 
 #-----------------------------------------------------------------------------
diff --git a/Resources/CMakeLists.txt b/Resources/CMakeLists.txt
index 47bde29d39..55257b4e76 100644
--- a/Resources/CMakeLists.txt
+++ b/Resources/CMakeLists.txt
@@ -14,19 +14,19 @@ if(NOT Slicer_INSTALL_NO_DEVELOPMENT)
     )
 
   file(GLOB PNGFILES RELATIVE "${CMAKE_CURRENT_SOURCE_DIR}" "*.png")
-  foreach(pngfile ${PNGFILES})
-    configure_file(
-      ${CMAKE_CURRENT_SOURCE_DIR}/${pngfile}
-      "${CMAKE_BINARY_DIR}/${Slicer_SHARE_DIR}/Resources/${pngfile}"
-      COPYONLY
-      )
-  endforeach()
-
   install(
     FILES ${PNGFILES}
     DESTINATION ${Slicer_INSTALL_SHARE_DIR}/Resources
     COMPONENT Development
     )
+
+  file(GLOB LOGOSPNGFILES RELATIVE "${CMAKE_CURRENT_SOURCE_DIR}" "Logos/*.png")
+  install(
+    FILES ${LOGOSPNGFILES}
+    DESTINATION ${Slicer_INSTALL_SHARE_DIR}/Resources/Logos
+    COMPONENT Development
+    )
+  
 endif()
 
 # Should this location change, update Base/Logic/vtkSlicerModuleLogic.cxx
@@ -46,3 +46,8 @@ install(
   COMPONENT Runtime
   )
 
+install(
+  FILES ${CMAKE_CURRENT_SOURCE_DIR}/qSlicer.qrc
+  DESTINATION ${Slicer_INSTALL_SHARE_DIR}/Resources COMPONENT Development
+  )
+
-- 
2.24.1

