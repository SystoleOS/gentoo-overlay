From b4fb6a91462f0c442c49e6080f6d58ab813bf39e Mon Sep 17 00:00:00 2001
From: Rafael Palomar <rafael.palomar@ous-research.no>
Date: Tue, 14 Mar 2023 16:34:32 +0100
Subject: [PATCH 29/29] BAD-ENH: Enable installation of utility scripts

---
 CMake/SlicerDirectories.cmake          | 3 +++
 CMakeLists.txt                         | 7 +++++++
 Templates/SlicerInstallConfig.cmake.in | 2 ++
 3 files changed, 12 insertions(+)

diff --git a/CMake/SlicerDirectories.cmake b/CMake/SlicerDirectories.cmake
index 80575be2af..8b5a4f3fbc 100644
--- a/CMake/SlicerDirectories.cmake
+++ b/CMake/SlicerDirectories.cmake
@@ -182,3 +182,6 @@ set(Slicer_THIRDPARTY_SHARE_DIR ${Slicer_SHARE_DIR})
 set(Slicer_INSTALL_THIRDPARTY_BIN_DIR "${Slicer_INSTALL_ROOT}${Slicer_THIRDPARTY_BIN_DIR}")
 set(Slicer_INSTALL_THIRDPARTY_LIB_DIR "${Slicer_INSTALL_ROOT}${Slicer_THIRDPARTY_LIB_DIR}")
 set(Slicer_INSTALL_THIRDPARTY_SHARE_DIR "${Slicer_INSTALL_ROOT}${Slicer_THIRDPARTY_SHARE_DIR}")
+
+set(Slicer_UTILITY_SCRIPTS_DIR "${CMAKE_SOURCE_DIR}/Utilities/Scripts")
+set(Slicer_INSTALL_UTILITY_SCRIPTS_DIR "${Slicer_INSTALL_LIBEXEC_DIR}/Utilities/Scripts")
diff --git a/CMakeLists.txt b/CMakeLists.txt
index 0cc2a1a02d..5a22937a29 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -1274,6 +1274,13 @@ if(NOT Slicer_INSTALL_NO_DEVELOPMENT)
     )
 endif()
 
+
+#-----------------------------------------------------------------------------
+# Install Utilities
+#-----------------------------------------------------------------------------
+install(PROGRAMS ${Slicer_QRCC_SCRIPT}
+  DESTINATION ${Slicer_INSTALL_UTILITY_SCRIPTS_DIR})
+
 #-----------------------------------------------------------------------------
 # Create target to download data from the <Slicer_ExternalData_DATA_MANAGEMENT_TARGET> group.
 # This must come after all tests have been added that reference the group, so we put it last.
diff --git a/Templates/SlicerInstallConfig.cmake.in b/Templates/SlicerInstallConfig.cmake.in
index ca14230176..82c8456082 100644
--- a/Templates/SlicerInstallConfig.cmake.in
+++ b/Templates/SlicerInstallConfig.cmake.in
@@ -163,3 +163,5 @@ set(Slicer_INSTALL_QTSCRIPTEDMODULES_SHARE_DIR "@Slicer_INSTALL_QTSCRIPTEDMODULE
 list(APPEND CMAKE_MODULE_PATH "@Slicer_INSTALL_CMAKE_DIR@")
 
 set(Slicer_Libs_VTK_WRAPPED_LIBRARIES "@Slicer_Libs_VTK_WRAPPED_LIBRARIES@")
+
+set(Slicer_QRCC_SCRIPT "@Slicer_INSTALL_UTILITY_SCRIPTS_DIR@/qrcc.py")
-- 
2.39.2

