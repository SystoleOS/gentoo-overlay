From e86acc41ee02080ec4d45f9eb1210414ff33acc7 Mon Sep 17 00:00:00 2001
From: Rafael Palomar <rafael.palomar@ous-research.no>
Date: Thu, 26 Jan 2023 10:06:21 +0100
Subject: [PATCH] ENH: Make colors a separate module

---
 Modules/Loadable/Colors/CMakeLists.txt        | 12 +++++++++++-
 Modules/Loadable/Colors/MRML/CMakeLists.txt   |  8 ++++++++
 Modules/Loadable/Colors/MRMLDM/CMakeLists.txt |  2 ++
 3 files changed, 21 insertions(+), 1 deletion(-)

diff --git a/Modules/Loadable/Colors/CMakeLists.txt b/Modules/Loadable/Colors/CMakeLists.txt
index b4356dee75..32356f53db 100644
--- a/Modules/Loadable/Colors/CMakeLists.txt
+++ b/Modules/Loadable/Colors/CMakeLists.txt
@@ -1,5 +1,15 @@
 #-----------------------------------------------------------------------------
-set(MODULE_NAME Colors)
+cmake_minimum_required(VERSION 3.16.3...3.19.7 FATAL_ERROR)
+
+#-----------------------------------------------------------------------------
+project(Colors)
+
+set(CMAKE_CXX_STANDARD 17)
+
+find_package(Slicer REQUIRED)
+include(${Slicer_USE_FILE})
+#-----------------------------------------------------------------------------
+set(MODULE_NAME ${PROJECT_NAME})
 set(MODULE_TITLE "${MODULE_NAME}")
 
 string(TOUPPER ${MODULE_NAME} MODULE_NAME_UPPER)
diff --git a/Modules/Loadable/Colors/MRML/CMakeLists.txt b/Modules/Loadable/Colors/MRML/CMakeLists.txt
index c1789ca18e..93a49bbba9 100644
--- a/Modules/Loadable/Colors/MRML/CMakeLists.txt
+++ b/Modules/Loadable/Colors/MRML/CMakeLists.txt
@@ -9,8 +9,16 @@ set(${KIT}_SRCS
   vtkMRMLColorLegendDisplayNode.h
   )
 
+
+set(${KIT}_INCLUDE_DIRECTORIES
+  ${vtkAddon_INCLUDE_DIRS}
+  )
+
 set(${KIT}_TARGET_LIBRARIES
   ${MRML_LIBRARIES}
+  ${VTK_LIBRARIES}
+  ${vtkAddon_LIBRARIES}
+  ${vtkSlicer${MODULE_NAME}ModuleMRMLDM}
   )
 
 #-----------------------------------------------------------------------------
diff --git a/Modules/Loadable/Colors/MRMLDM/CMakeLists.txt b/Modules/Loadable/Colors/MRMLDM/CMakeLists.txt
index 981e04e478..b072de39a8 100644
--- a/Modules/Loadable/Colors/MRMLDM/CMakeLists.txt
+++ b/Modules/Loadable/Colors/MRMLDM/CMakeLists.txt
@@ -33,9 +33,11 @@ set(${KIT}_SRCS
 
 set(${KIT}_TARGET_LIBRARIES
   ${MRML_LIBRARIES}
+  ${MRMLDM_LIBRARIES}
   vtkSlicer${MODULE_NAME}ModuleLogic
   vtkSlicer${MODULE_NAME}ModuleMRML
   vtkSlicer${MODULE_NAME}ModuleVTKWidgets
+  ${VTK_LIBRARIES}
 )
 
 #-----------------------------------------------------------------------------
-- 
2.34.1

