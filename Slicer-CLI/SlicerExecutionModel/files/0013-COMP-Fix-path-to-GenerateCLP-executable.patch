From baf00a06499653a090f3b9611b40a6c308b82817 Mon Sep 17 00:00:00 2001
From: Rafael Palomar <rafael.palomar@rr-research.no>
Date: Tue, 17 Dec 2019 08:05:25 +0100
Subject: [PATCH 13/17] COMP: Fix path to GenerateCLP executable

---
 GenerateCLP/CMakeLists.txt                    | 8 +++++---
 GenerateCLP/GenerateCLPInstallConfig.cmake.in | 2 +-
 2 files changed, 6 insertions(+), 4 deletions(-)

diff --git a/GenerateCLP/CMakeLists.txt b/GenerateCLP/CMakeLists.txt
index 46cc526..5167101 100644
--- a/GenerateCLP/CMakeLists.txt
+++ b/GenerateCLP/CMakeLists.txt
@@ -159,14 +159,15 @@ set(GenerateCLP_FORWARD_PATH_BUILD " \\
    ${json_forward_path_build} \\
    \"${ModuleDescriptionParser_DIR}/bin\" CONFIG_DIR_POST \\
 ")
+#ITK path here is a workaround!!!
 set(GenerateCLP_FORWARD_PATH_INSTALL " \\
    \".\", \\
-   \"${ITK_DIR}/bin\", \\
+   \"${ITK_INSTALL_PREFIX}/lib64/ITK-${ITK_VERSION_MAJOR}.${ITK_VERSION_MINOR}.${ITK_VERSION_PATCH}\", \\
    ${json_forward_path_install} \\
-   \"${ModuleDescriptionParser_DIR}/bin\" \\
+   \"${SlicerExecutionModel_INSTALL_LIB_DIR}\" \\
 ")
 set(GenerateCLP_FORWARD_EXE GenerateCLP)
-set(GenerateCLP_FORWARD_DIR_INSTALL "..")
+set(GenerateCLP_FORWARD_DIR_INSTALL ".")
 
 # --------------------------------------------------------------------------
 # Build launcher
@@ -243,6 +244,7 @@ if(NOT ${PROJECT_NAME}_INSTALL_NO_DEVELOPMENT)
     ${GenerateCLP_BINARY_DIR}/bin/GenerateCLP
     ${GenerateCLP_BINARY_DIR}/bin/GenerateCLPLauncher
     DESTINATION bin
+    PERMISSIONS OWNER_WRITE WORLD_READ WORLD_EXECUTE
     COMPONENT Runtime
     )
 
diff --git a/GenerateCLP/GenerateCLPInstallConfig.cmake.in b/GenerateCLP/GenerateCLPInstallConfig.cmake.in
index a53fa54..c037e6d 100644
--- a/GenerateCLP/GenerateCLPInstallConfig.cmake.in
+++ b/GenerateCLP/GenerateCLPInstallConfig.cmake.in
@@ -10,7 +10,7 @@ endif()
 set(GenerateCLP_INCLUDE_DIRS "${GenerateCLP_CONFIG_DIR}/../../include/GenerateCLP")
 set(GenerateCLP_LIBRARY_DIRS "${GenerateCLP_CONFIG_DIR}")
 set(GenerateCLP_USE_FILE "${GenerateCLP_CONFIG_DIR}/UseGenerateCLP.cmake")
-set(GENERATECLP_EXE "${GenerateCLP_CONFIG_DIR}/../../bin/GenerateCLP")
+set(GENERATECLP_EXE "${GenerateCLP_CONFIG_DIR}/../../../bin/GenerateCLP")
 if(NOT WIN32)
   set(GENERATECLP_EXE "${GENERATECLP_EXE}Launcher")
 endif()
-- 
2.24.1

