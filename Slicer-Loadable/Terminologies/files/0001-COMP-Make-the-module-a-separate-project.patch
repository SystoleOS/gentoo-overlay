From d85f2443d3729b72f2046799938cc490d31be76d Mon Sep 17 00:00:00 2001
From: Rafael Palomar <rafael.palomar@rr-research.no>
Date: Thu, 3 Oct 2019 10:07:31 +0200
Subject: [PATCH] COMP: Make the module a separate project

---
 Modules/Loadable/Annotations/CMakeLists.txt   | 22 ++++++++++++++++++-
 .../Loadable/Annotations/MRML/CMakeLists.txt  |  3 +++
 .../Annotations/Widgets/CMakeLists.txt        |  2 ++
 .../Annotations/qSlicerAnnotationsModule.h    |  2 ++
 Modules/Loadable/Terminologies/CMakeLists.txt | 19 ++++++++++++++++
 .../Terminologies/Logic/CMakeLists.txt        |  4 ++++
 .../Terminologies/Widgets/CMakeLists.txt      |  3 +++
 7 files changed, 54 insertions(+), 1 deletion(-)

diff --git a/Modules/Loadable/Annotations/CMakeLists.txt b/Modules/Loadable/Annotations/CMakeLists.txt
index 57125cac2..e550d44ef 100644
--- a/Modules/Loadable/Annotations/CMakeLists.txt
+++ b/Modules/Loadable/Annotations/CMakeLists.txt
@@ -1,3 +1,21 @@
+project(Annotations)
+
+cmake_minimum_required(VERSION 3.0)
+
+find_package(Slicer REQUIRED)
+include(${Slicer_USE_FILE})
+
+find_package(Qt5 COMPONENTS Widgets Network Xml PrintSupport REQUIRED)
+find_package(VTK REQUIRED)
+include(${VTK_USE_FILE})
+
+find_package(CTK REQUIRED)
+include(${CTK_USE_FILE})
+
+find_package(ITK REQUIRED)
+include(${ITK_USE_FILE})
+
+link_directories(${Slicer_HOME}/${Slicer_INSTALL_LIB_DIR})
 
 #-----------------------------------------------------------------------------
 set(MODULE_NAME "Annotations")
@@ -76,6 +94,7 @@ set(MODULE_RESOURCES
   )
 
 set(MODULE_TARGET_LIBRARIES
+  qSlicerBaseQTGUI
   qSlicerBaseQTCore
   qMRMLWidgets
   vtkSlicer${MODULE_NAME}ModuleMRML
@@ -83,6 +102,7 @@ set(MODULE_TARGET_LIBRARIES
   vtkSlicer${MODULE_NAME}ModuleMRMLDisplayableManager
   vtkSlicer${MODULE_NAME}ModuleLogic
   qSlicer${MODULE_NAME}ModuleWidgets
+  Qt5::PrintSupport
   )
 
 #-----------------------------------------------------------------------------
@@ -90,7 +110,7 @@ slicerMacroBuildLoadableModule(
   NAME ${MODULE_NAME}
   TITLE ${MODULE_TITLE}
   EXPORT_DIRECTIVE ${MODULE_EXPORT_DIRECTIVE}
-  INCLUDE_DIRECTORIES ${MODULE_INCLUDE_DIRECTORIES}
+  INCLUDE_DIRECTORIES ${MODULE_INCLUDE_DIRECTORIES} ${Slicer_Base_INCLUDE_DIRS} ${Qt5PrintSupport_INCLUDE_DIRS}
   SRCS ${MODULE_SRCS}
   MOC_SRCS ${MODULE_MOC_SRCS}
   UI_SRCS ${MODULE_UI_SRCS}
diff --git a/Modules/Loadable/Annotations/MRML/CMakeLists.txt b/Modules/Loadable/Annotations/MRML/CMakeLists.txt
index 5411e670b..fea59fd46 100644
--- a/Modules/Loadable/Annotations/MRML/CMakeLists.txt
+++ b/Modules/Loadable/Annotations/MRML/CMakeLists.txt
@@ -5,6 +5,7 @@ set(KIT ${PROJECT_NAME})
 set(${KIT}_EXPORT_DIRECTIVE "VTK_SLICER_${MODULE_NAME_UPPER}_MODULE_MRML_EXPORT")
 
 set(${KIT}_INCLUDE_DIRECTORIES
+  ${Slicer_Libs_INCLUDE_DIRS}
   )
 
 set(${KIT}_SRCS
@@ -60,6 +61,8 @@ set(${KIT}_SRCS
 
 set(${KIT}_TARGET_LIBRARIES
   ${MRML_LIBRARIES}
+  ${VTK_LIBRARIES}
+  ${ITK_LIBRARIES}
   )
 
 #-----------------------------------------------------------------------------
diff --git a/Modules/Loadable/Annotations/Widgets/CMakeLists.txt b/Modules/Loadable/Annotations/Widgets/CMakeLists.txt
index a456d0d74..50a84a3ab 100644
--- a/Modules/Loadable/Annotations/Widgets/CMakeLists.txt
+++ b/Modules/Loadable/Annotations/Widgets/CMakeLists.txt
@@ -51,6 +51,8 @@ set(${KIT}_RESOURCES
 set(${KIT}_TARGET_LIBRARIES
   vtkSlicerAnnotationsModuleMRML
   vtkSlicerAnnotationsModuleLogic
+  qMRMLWidgets
+  ${CTK_LIBRARIES}
   )
 
 #-----------------------------------------------------------------------------
diff --git a/Modules/Loadable/Annotations/qSlicerAnnotationsModule.h b/Modules/Loadable/Annotations/qSlicerAnnotationsModule.h
index a504e7a03..cb503f20f 100644
--- a/Modules/Loadable/Annotations/qSlicerAnnotationsModule.h
+++ b/Modules/Loadable/Annotations/qSlicerAnnotationsModule.h
@@ -2,6 +2,8 @@
 #define __qSlicerAnnotationsModule_h
 
 // SlicerQT includes
+//#include "qSlicerLoadableModule.h"
+
 #include "qSlicerLoadableModule.h"
 
 // CTK includes
diff --git a/Modules/Loadable/Terminologies/CMakeLists.txt b/Modules/Loadable/Terminologies/CMakeLists.txt
index 50e4ca553..25ba774b6 100644
--- a/Modules/Loadable/Terminologies/CMakeLists.txt
+++ b/Modules/Loadable/Terminologies/CMakeLists.txt
@@ -1,3 +1,22 @@
+project(Annotations)
+
+cmake_minimum_required(VERSION 3.0)
+
+find_package(Slicer REQUIRED)
+include(${Slicer_USE_FILE})
+
+find_package(Qt5 COMPONENTS Widgets Network Xml PrintSupport REQUIRED)
+find_package(VTK REQUIRED)
+include(${VTK_USE_FILE})
+
+find_package(CTK REQUIRED)
+include(${CTK_USE_FILE})
+
+find_package(ITK REQUIRED)
+include(${ITK_USE_FILE})
+
+link_directories(${Slicer_HOME}/${Slicer_INSTALL_LIB_DIR})
+
 #-----------------------------------------------------------------------------
 set(MODULE_NAME "Terminologies")
 set(MODULE_TITLE ${MODULE_NAME})
diff --git a/Modules/Loadable/Terminologies/Logic/CMakeLists.txt b/Modules/Loadable/Terminologies/Logic/CMakeLists.txt
index 2c87302ff..474ba290d 100644
--- a/Modules/Loadable/Terminologies/Logic/CMakeLists.txt
+++ b/Modules/Loadable/Terminologies/Logic/CMakeLists.txt
@@ -22,6 +22,10 @@ set(${KIT}_SRCS
   )
 
 set(${KIT}_TARGET_LIBRARIES
+  MRMLLogic
+  MRMLCore
+  ${CTK_LIBRARIES}
+  ${VTK_LIBRARIES}
   )
 
 #-----------------------------------------------------------------------------
diff --git a/Modules/Loadable/Terminologies/Widgets/CMakeLists.txt b/Modules/Loadable/Terminologies/Widgets/CMakeLists.txt
index 0e2909a2b..3655f0f56 100644
--- a/Modules/Loadable/Terminologies/Widgets/CMakeLists.txt
+++ b/Modules/Loadable/Terminologies/Widgets/CMakeLists.txt
@@ -36,6 +36,9 @@ set(${KIT}_RESOURCES
 
 set(${KIT}_TARGET_LIBRARIES
   vtkSlicerTerminologiesModuleLogic
+  qMRMLWidgets
+  qSlicerBaseQTCore
+  qSlicerBaseQTGUI
   )
 
 #-----------------------------------------------------------------------------
-- 
2.21.0

