From 5ff968767b96c744746980b9c06b2df3afb3583e Mon Sep 17 00:00:00 2001
From: Rafael Palomar <rafael.palomar@rr-research.no>
Date: Fri, 4 Oct 2019 15:08:48 +0200
Subject: [PATCH] COMP: Making the module a separate project

---
 .../Loadable/SubjectHierarchy/CMakeLists.txt  | 23 +++++++++++++++++++
 .../SubjectHierarchy/Logic/CMakeLists.txt     |  3 +++
 .../SubjectHierarchy/Widgets/CMakeLists.txt   | 10 +++++++-
 3 files changed, 35 insertions(+), 1 deletion(-)

diff --git a/Modules/Loadable/SubjectHierarchy/CMakeLists.txt b/Modules/Loadable/SubjectHierarchy/CMakeLists.txt
index 92257e4aa..4b0f08ef4 100644
--- a/Modules/Loadable/SubjectHierarchy/CMakeLists.txt
+++ b/Modules/Loadable/SubjectHierarchy/CMakeLists.txt
@@ -1,3 +1,25 @@
+project(SubjectHierarchy)
+
+cmake_minimum_required(VERSION 3.0)
+
+find_package(Slicer REQUIRED)
+include(${Slicer_USE_FILE})
+
+find_package(Qt5 COMPONENTS Widgets Network Xml PrintSupport REQUIRED)
+find_package(VTK REQUIRED)
+include(${VTK_USE_FILE})
+
+find_package(CTK REQUIRED)
+include(${CTK_USE_FILE})
+
+find_package(ITK REQUIRED)
+include(${ITK_USE_FILE})
+
+link_directories(
+  ${Slicer_HOME}/${Slicer_INSTALL_LIB_DIR}
+  ${Slicer_INSTALL_QTLOADABLEMODULES_LIB_DIR}
+  )
+
 #-----------------------------------------------------------------------------
 set(MODULE_NAME "SubjectHierarchy")
 set(MODULE_TITLE "Subject Hierarchy")
@@ -39,6 +61,7 @@ set(MODULE_UI_SRCS
 set(MODULE_TARGET_LIBRARIES
   vtkSlicer${MODULE_NAME}ModuleLogic
   qSlicer${MODULE_NAME}ModuleWidgets
+  ${VTK_LIBRARIES}
   )
 
 set(MODULE_RESOURCES
diff --git a/Modules/Loadable/SubjectHierarchy/Logic/CMakeLists.txt b/Modules/Loadable/SubjectHierarchy/Logic/CMakeLists.txt
index fd9cfaf55..38bb955fe 100644
--- a/Modules/Loadable/SubjectHierarchy/Logic/CMakeLists.txt
+++ b/Modules/Loadable/SubjectHierarchy/Logic/CMakeLists.txt
@@ -18,6 +18,9 @@ set (${KIT}_INCLUDE_DIRS ${CMAKE_CURRENT_SOURCE_DIR} ${CMAKE_CURRENT_BINARY_DIR}
 #-----------------------------------------------------------------------------
 set(${KIT}_TARGET_LIBRARIES
   MRMLCore
+  MRMLLogic
+  ${VTK_LIBRARIES}
+  libSlicerBaseLogic.so
   )
 
 #-----------------------------------------------------------------------------
diff --git a/Modules/Loadable/SubjectHierarchy/Widgets/CMakeLists.txt b/Modules/Loadable/SubjectHierarchy/Widgets/CMakeLists.txt
index b086ee5b8..7154fc350 100644
--- a/Modules/Loadable/SubjectHierarchy/Widgets/CMakeLists.txt
+++ b/Modules/Loadable/SubjectHierarchy/Widgets/CMakeLists.txt
@@ -6,8 +6,10 @@ set(${KIT}_EXPORT_DIRECTIVE "Q_SLICER_MODULE_${MODULE_NAME_UPPER}_WIDGETS_EXPORT
 
 set(${KIT}_INCLUDE_DIRECTORIES
   ${vtkSlicerSubjectHierarchyModuleLogic_INCLUDE_DIRS}
-  ${qSlicerTerminologiesModuleWidgets_INCLUDE_DIRS}
+  ${Slicer_INSTALL_QTLOADABLEMODULES_INCLUDE_DIR}/qSlicerTerminologiesModuleWidgets
+  ${Slicer_INSTALL_QTLOADABLEMODULES_INCLUDE_DIR}/vtkSlicerTerminologiesModuleLogic
   ${MRMLCore_INCLUDE_DIRS}
+  ${Qt5Xml_INCLUDE_DIRS}
   )
 if(Slicer_BUILD_CLI_SUPPORT)
   list(APPEND ${KIT}_INCLUDE_DIRECTORIES
@@ -94,7 +96,13 @@ set_source_files_properties( qSlicerSubjectHierarchyAbstractPlugin.h WRAP_EXCLUD
 set(${KIT}_TARGET_LIBRARIES
   vtkSlicer${MODULE_NAME}ModuleLogic
   qSlicerTerminologiesModuleWidgets
+  vtkSlicerTerminologiesModuleLogic
   MRMLCore
+  MRMLDisplayableManager
+  qMRMLWidgets
+  qSlicerBaseQTCore
+  qSlicerBaseQTGUI
+  ${CTK_LIBRARIES}
   )
 if(Slicer_BUILD_CLI_SUPPORT)
   list(APPEND ${KIT}_TARGET_LIBRARIES
-- 
2.24.1

